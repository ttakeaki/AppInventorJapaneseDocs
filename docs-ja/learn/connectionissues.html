<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8" />
  <meta content="App Inventor for Android" name="description" />
  <meta content="Android, Blocks App Inventor, Mobile, Phone, IDE" name="keywords" />
  <title>
   接続時の問題 - App Inventor for Android
  </title>
  <link href="/static/images/appinventor-16.png" rel="SHORTCUT ICON" type="image/ico" />
  <link href="/static/images/appinventor-16.png" rel="icon" type="image/png" />
  <link href="/static/css/appinventor.css" rel="stylesheet" />
  <script src="http://www.google.com/js/gweb/analytics/autotrack.js">
  </script>
  <script>
   var tracker = new gweb.analytics.AutoTrack({
        profile: 'UA-5856106-2'
      });
  </script>
  <script language = "JavaScript" src="/static/scripts/HeaderAndFooter.js"></script>
  <style>
   .issue {
    background-color: #efefef;
    padding: 10px;  
    color: #333;
    font-size: 12px;
    font-weight: normal;
    }
    .cause {
    background-color: #ffffff;
    padding: 10px;  
    color: #333;
    font-size: 12px;
    border: 1px solid #efefef;
    }
    .workaround {
    background-color: #ffffff;
    padding: 10px;  
    color: #576b07;
    font-size: 12px;
    border: 2px solid #adca3c;
    margin-top: 5px;
    }
  </style>
  <style>
   img.c2 {border-width:0}
    div.c1 {clear:both;}
  </style>
 </head>
 <body>
  <script language = "JavaScript">createHeader('<div id="navigation-breadcrumb"> <a href="/learn/">Learn</a> &gt; Connection Issues &gt; ');</script><br>
  <div id="aiac">
   <div class="main-container">
    <div class="customhr customhr-gray">
    </div>
    <div class="content">
     <div class="content-body">
      <div class="learn-page">
       <h1>
        ブロックエディターと携帯電話の接続で問題が起きたときの回避策 &amp; 解決方法
       </h1>
       <h2>
        要約
       </h2>
       <p>
        このページでは、ブロックエディターと携帯電話との接続で問題が起きたときのトラブルシューティングの方法を説明しています。<br>
        接続に問題が起きる原因はいくつか考えられ、ここでは症状、原因、および解決方法に分け説明を行っています。<br>
        このページの内容を作成している間、忍耐強く待ってくれた方、協力してくれた方に感謝いたします。
       </p>
       <h2>
        回避策 &amp; 解決方法
       </h2>
       <p>
        回避策に関して、これからここで挙げる内容の多くは、Java コンソール上の情報を調べたり、携帯電話上で発生している現象を調べることで特定されたものである、ということを知っておいてください。
        Java コンソールの使い方は、
        <a href="/learn/reference/other/testing.html">
         テスト
        </a>
        のページに説明があります。
       </p>
       <div class="issue">
        <strong>
         症状:
        </strong>
        ブロックエディターで
        <em>
         携帯電話に接続
        </em>
         をクリックしたあと、真っ白な Screen1 が携帯電話の画面に表示されてすぐ消えてしまう。<br>
         あるいは、携帯電話には何も表示されず、ブロックエディターに携帯電話を接続するよう促すメッセージが表示される。<br>
         この症状が起きたとき、Java コンソールでは "Failed in setupSocket" というメッセージが表示されている。
       </div>
       <div class="cause">
        <strong>
         原因:
        </strong>
        もっとも可能性の高い原因は、携帯電話に Android 1.5 が搭載されている、ということです。（もし 1.5 より高いバージョンの Android を使っていて、同様の症状が出た場合は、お手数ですが開発者までご連絡ください）
       </div>
       <div class="workaround">
        <strong>
         回避策:
        </strong>
        現時点で、App Inventor は Android 1.5 に対応していません。この問題に対する修正はすでに準備が整っており、次回の App Inventor サーバーのアップデートでこの修正が反映され、Android 1.5 も正常に接続できるようになる予定です（１〜２週間後には反映予定）*
        しばらくの間は、接続先として OS を Android 1.6 以降として作成したエミュレーターをお使いいただき、別途パッケージ化したアプリケーションを携s帯電話の実機にダウンロードする方法で対処してください。
       </div>
       <br />
       <div class="issue">
        <strong>
         症状:
        </strong>
        Android 1.6 以降を搭載した携帯電話を使っていて、ブロックエディターで
        <em>
         携帯電話に接続
        </em>
        をクリックしたあと、しばらくして真っ白な Screen1 が携帯電話の画面に表示される。<br>
        このとき、ブロックエディターに携帯電話を接続するよう促すメッセージが表示され、Java コンソールでは "Failed in setupSocket" というメッセージが表示されている。<br>
        この症状は接続時に毎回起こる場合もあれば、そうでない場合もある。
       </div>
       <div class="cause">
        <strong>
         原因:
        </strong>
        これは接続のタイミング問題で、携帯電話からブロックエディターに接続しようとしたアプリケーションの起動が遅れ、ブロックエディターがタイムアウトし、接続失敗と判定したと考えられます。
       </div>
       <div class="workaround">
        <strong>
         回避策:
        </strong>
        携帯電話の処理速度を落としていると考えられるアプリケーション（同期サービスや Twitter など）を終了させ、ブロックエディターへの接続を再度試みてください。<br>
        これでうまくいった場合は、上述のタイミング問題が発生しているものと思われます。<br>
        この問題に対する修正を次回の App Inventor サーバーのアップデートに入れられるよう、鋭意作業を進めています（１〜２週間で完了の予定です）*
       </div>
       <br />
       <div class="issue">
        <strong>
         症状:
        </strong>
        Java コンソールに "adb-forward: Divice rejected command: cannot bind socket" というメッセージが表示され、ブロックエディターが携帯電話と接続できない。
       </div>
       <div class="cause">
        <strong>
         原因:
        </strong>
        もっとも可能性が高い原因は、お使いのコンピューターで起動中の他のアプリが 9997 番ポートを使っている、というものです。
       </div>
       <div class="workaround">
        <strong>
         回避策:
        </strong>
        コマンドラインでどのアプリケーションがどのポートを使っているかを特定することができます。
        <p>
         Linux （おそらく Macintosh でも同様）の場合は、シェル（ターミナル）ウィンドウを開き、
         <br />
         <code>
          lsof | grep 9997
         </code>
         <br />
         と入力してください。<br>
         これで 9997 番のポートを使用しているアプリケーションの名前と、プロセス ID が表示されます。
        </p>
        <p>
         Windows の場合は、コマンドプロンプトを開き、
         <br />
         <code>
          netstat -ao |find /i "9997"
         </code>
         <br />
         と入力してください。<br>
         表示されたテキストの末尾にプロセス ID (PID) が表示されていますので、
         <br />
         <code>
          tasklist |find /i "PID"
         </code>
         と入力してください。
        </p>
        <p>
         9997 番のポートを使用していたアプリケーションを停止したら、ブロックエディターは正常に "adb forward" を実行できる状態になり、携帯電話に接続できるようになっているはずです。（ただし、上述した他の問題が発生していないことが前提です）
        </p>
        <p>
         将来的には、9997 番以外のポートでもブロックエディターから携帯電話に接続できるよう修正する予定ですが、次回のサーバーのアップデートには反映されない予定です。
        </p>
       </div>
       <br />
       <div class="issue">
        <strong>
         症状:
        </strong>
        携帯電話に接続しようとすると、ブロックエディターで携帯電話を接続するよう促すメッセージが表示され、Java コンソールに "Device connected: ????????????" というメッセージを含む行が表示されている。
       </div>
       <div class="cause">
        <strong>
         原因:
        </strong>
        adb (Android Debug Bridge) から、お使いの携帯電話が認識されていません。<br>
        ドライバー、あるいはパーミッションの設定に問題があると思われます。
       </div>
       <div class="workaround">
        <strong>
         回避策:
        </strong>
        解決策はお使いのシステムと、携帯電話のモデルによって異なります。<br>
        App Inventor Forum** や、Web 上にある他の Android 関連のフォーラムをあたり、お使いのシステムと携帯電話のモデルに合った解決方法を探してみてください。<br>
        多くの人たちが修正方法や、ドライバーや解決方法の説明へのポインターを投稿しているはずです。<br>
        "adb devices" を実行したとき、デバイス ID が英数字を組み合わせた文字列として表示されれば、問題は解決したことになります。<br>
        adb コマンドの使い方については、「テストとデバッグ」のページを参照してください。
       </div>
       <br />
       <div class="issue">
        <strong>
         症状:
        </strong>
        携帯電話への接続はできたが、携帯電話上の画像や音声などのメディアファイルが参照できない。<br>
        Java コンソールには "ddms: transfer error: Permission denied" または "yacodeblocks.AndroidControllerException: Failed to upload file" というメッセージが表示されている。<br>
        ブロックエディターに "Can't play the file meow.wav" （ "meow.wav" の部分はアクセスしようとしたファイルの名前）というエラーが表示されていることがある。
       </div>
       <div class="cause">
        <strong>
         原因:
        </strong>
        携帯電話の USB 接続モードの設定に誤りがあります。
       </div>
       <div class="workaround">
        <strong>
         回避策:
        </strong>
        携帯電話の通知パネルをプルダウンで表示させます（ USB 接続のアイコンが表示されているはずです）<br>
        次に、「USB 接続」ボタンをクリックします。<br>
        お使いの携帯電話のモデルによって、クリックした後に表示される内容には若干の差があります。
        <ul>
         <li>
          Nexus One をお使いの場合は、「USB ストレージを有効にする」ボタンが表示されていますが、これは選択しないでください。
         </li>
         <li>
          Droid をお使いの場合は、４つのオプションが表示されています。「 Windows Media Sync 」を選択してください。***
         </li>
        </ul>
       </div>
       <br />
       <p>
       *訳注: 原文で "Next update" とされているのはいつのものか、実際に修正が行われたのかの確認が必要。<br>
       **訳注: 日本語の情報源としては、<a href="https://groups.google.com/group/app-inventor-jp" target="_blank">日本App Inventorユーザー会</a>の Google グループがあります。また、日本 Android の会のメーリングリストのログからも様々な情報を得る事ができます。困ったらこのあたりをのぞいてみてください。新たに質問するときは、マナーを大切に。<br>
       ***訳注: Droid での検証が必要
       </p>
      </div>
     </div>
    </div>
    <div class="footer">
     <script language = "JavaScript">createFooter();</script><br>
     <div class="footer-lastupdate">
      <script>
       if (document.lastModified != '') {
                var m = "Page last updated: " + document.lastModified;
                var p = m.length-8;
                document.writeln("<center>");
                document.write(m.substring(p, 0));
                document.writeln("<\/center>");
              }
      </script>
     </div>
    </div>
   </div>
  </div>
 </body>
</html>